{% extends '/layouts/base_updown.html' %} {% block content %}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/css/swiper.min.css"
/>
<link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="style_menu.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/js/swiper.min.js"></script>
<script type="text/javascript" defer src="main.js"></script>
<script type="text/javascript" defer src="menu.js"></script>

<script src="{{url_for('static',filename='js/post.js') }}"></script>

{% if post_list %}
<div class="wrapper">
  <div class="overlay"></div>

  <div class="middle">
    <div class="imagecontainer"></div>
  </div>
  <div class="bodywrapper">
    <div class="board-bodywrapper">
      <aside class="sidebar">
        <div class="sidebar-title"><h3 class="sidebar-name">📋</h3></div>
        <ul class="sidebar-list">
          <li class="sidebar-item">
            <a href="{{url_for('board_views.board')}}">전체 게시판</a>
          </li>
          {% if board_ls %} {% for board in board_ls %}
          <li class="sidebar-item">
            <a
              href="{{url_for('board_views.board_boardID', brdId=board.brdId)}}"
              >{{board.brdNm}}</a
            >
          </li>
          {% endfor %} {% endif %}
        </ul>
      </aside>

      <section class="main">
        <div class="articlecontainer">
          <div class="postcontainer">
            <div class="post-upper">
              {% if post_list %} {% for post in post_list %}
              <div class="post-position">{{post.brdId}}</div>
              <div class="post-title-bar">{{post.title}}</div>
              <div class="post-upper-name">{{post.userId}}</div>

              <ul class="post-upper-list">
                <li class="post-upper-item">
                  <div class="post-upper-time">{{post.pstCrtDate}}</div>
                  <div class="post-upper-view">{{post.vwCnt}}</div>
                </li>
                <li class="post-upper-item">
                  <div class="mod-btn">
                    <a
                      href="{{url_for('post_views.post_edit', pstId=post.pstId)}}"
                      >수정</a
                    >
                  </div>
                  <div class="del-btn">
                    <a
                      href="{{url_for('post_views.post_del', pstId=post.pstId)}}"
                      >삭제</a
                    >
                  </div>
                  {% for message in get_flashed_messages() %}
                  <script>
                    Swal.fire({
                      icon: "error",
                      title: "경고",
                      text: `{{ message }}`,
                    });
                  </script>
                  {% endfor %}
                </li>
              </ul>
              {% endfor %}{% endif %}
            </div>

            <div class="post-article">{{post_list[0].pstCntnt}}</div>

            <div class="post-bottom-list">
              <button type="button" class="like">붐업</button>
              <button type="button" class="hate">붐따</button>
              <a>{{post_list[0].pstLikeCnt}}</a>
              <a>{{post_list[0].pstUnlikeCnt}}</a>
              <a
                href="{{url_for('post_views.like_unlike_click', pstId=post_list[0].pstId, type='like', post=1)}}"
                >좋아요</a
              >
              <a
                href="{{url_for('post_views.like_unlike_click', pstId=post_list[0].pstId, type='unlike', post=1)}}"
                >싫어요</a
              >
            </div>

            <div class="post-comment-container">
              <div class="now-comment">댓글</div>
              <form
                style="display: flex;"
                method="post"
                action="{{url_for('comment_views.comment_add', pstId=post_list[0].pstId)}}"
              >
                
                    <input
                      class="comment-input"
                      type="text"
                      name="cmtCntnt"
                      id="cmtCntnt"
                      placeholder="댓글을 입력해주세요"
                      onkeydown="enterFunc(event,'cmtCntnt','submit')"
                    />
                    <input
                        class="submit-input"
                        type="submit"
                        id="submit"
                        value="추가"
                        onclick="btnClick(event)"
                      />
                
                    </form>

              {% if comment_list %} {% for comment in comment_list %}
              <div class="comment-view">
                <ul class="comment-view-list">
                  <li class="comment-view-item">
                    <div class="comment-user">{{ comment.userId }}</div>
                    <div class="comment-content">{{ comment.cmtCntnt }}</div>
                    <div class="comment-time">{{ comment.cmtCrtDate }}</div>
                    <div class="comment-btn">
                      <ul class="comment-btn-list">
                        <li class="comment-btn-item">
                          <a>{{ comment.cmtLikeCnt }}</a>
                          <a
                            href="{{url_for('post_views.like_unlike_click', pstId=comment.cmtId, type='like', post=0)}}"
                            >좋아요</a
                          >
                        </li>
                        <li class="comment-btn-item">
                          <a>{{ comment.cmtUnlikeCnt }}</a>
                          <a
                            href="{{url_for('post_views.like_unlike_click', pstId=comment.cmtId, type='unlike', post=0)}}"
                            >싫어요</a
                          >
                        </li>
                        <li class="comment-btn-item">
                          <a
                            href="{{url_for('comment_views.comment_del', cmtId=comment.cmtId)}}"
                            >삭제하기</a
                          >
                        </li>
                      </ul>
                    </div>
                  </li>
                </ul>
              </div>
              {% endfor %} {% else %}
              <li style="list-style: none;"></li>
              {% endif %}
            </div>

            <div class="post-article-under">
              <button type="button" class="backtomainBtn">
                <a
                  href="{{url_for('post_views.post', pstId=post_list[0].pstId)}}"
                >
                  목록으로 돌아가기</a
                >
              </button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>

<script>
  $(window);
</script>
{% else %}
<p>post_list가 없습니다.</p>
{% endif %}{% endblock %}
